!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@ionic/angular"),require("@angular/common"),require("country-code-emoji"),require("libphonenumber-js"),require("rxjs")):"function"==typeof define&&define.amd?define("ui-phone-input",["exports","@angular/core","@ionic/angular","@angular/common","country-code-emoji","libphonenumber-js","rxjs"],n):n((e=e||self)["ui-phone-input"]={},e.ng.core,e.angular,e.ng.common,e.flag,e.libphonenumberJs,e.rxjs)}(this,(function(e,n,t,o,a,i,r){"use strict";a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;function u(e,n,t,o){return new(t||(t=Promise))((function(a,i){function r(e){try{s(o.next(e))}catch(e){i(e)}}function u(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,u)}s((o=o.apply(e,n||[])).next())}))}function s(e,n){var t,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=n.call(e,r)}catch(e){i=[6,e],o=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}Object.create;function l(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,a,i=t.call(e),r=[];try{for(;(void 0===n||n-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(e){a={error:e}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return r}function c(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(l(arguments[n]));return e}Object.create;var h={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas (the)",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia (Plurinational State of)",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BR:"Brazil",IO:"British Indian Ocean Territory (the)",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cabo Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",KY:"Cayman Islands (the)",CF:"Central African Republic (the)",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands (the)",CO:"Colombia",KM:"Comoros (the)",CD:"Congo (the Democratic Republic of the)",CG:"Congo (the)",CK:"Cook Islands (the)",CR:"Costa Rica",HR:"Croatia",CU:"Cuba",CW:"Curaçao",CY:"Cyprus",CZ:"Czechia",CI:"Côte d'Ivoire",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic (the)",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FK:"Falkland Islands (the) [Malvinas]",FO:"Faroe Islands (the)",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",GA:"Gabon",GM:"Gambia (the)",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Holy See (the)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic of)",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea (the Democratic People's Republic of)",KR:"Korea (the Republic of)",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic (the)",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands (the)",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States of)",MD:"Moldova (the Republic of)",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands (the)",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger (the)",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands (the)",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines (the)",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",MK:"Republic of North Macedonia",RO:"Romania",RU:"Russian Federation (the)",RW:"Rwanda",RE:"Réunion",BL:"Saint Barthélemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan (the)",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands (the)",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates (the)",GB:"United Kingdom of Great Britain and Northern Ireland (the)",US:"United States of America (the)",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela (Bolivarian Republic of)",VN:"Viet Nam",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:"Åland Islands"},d=function(){function e(e){this.el=e,this.ionChange=new n.EventEmitter,this.searchString=""}return e.prototype.ngOnInit=function(){var e=this;this.keySubscription=r.fromEvent(document,"keydown").subscribe((function(n){"a"===n.key&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),e.selectAll=!0),1===n.key.length&&(e.searchString=""+e.searchString+n.key),"Backspace"===n.key&&e.searchString.length&&(e.searchString=e.selectAll?"":e.searchString.slice(0,e.searchString.length-1),e.selectAll=!1),e.filter()}))},e.prototype.ngAfterViewInit=function(){var e=this,n=this.el.nativeElement.querySelector("#"+this.selected.code);setTimeout((function(){return u(e,void 0,void 0,(function(){return s(this,(function(e){return null==n||n.scrollIntoView(),null==n||n.focus(),[2]}))}))}),500)},e.prototype.ngOnDestroy=function(){var e;null===(e=this.keySubscription)||void 0===e||e.unsubscribe()},e.prototype.filter=function(){var e=this;this.filteredCountries=this.searchString?this.countries.filter((function(n){return n.name.toLowerCase().includes(e.searchString.toLowerCase())})):void 0},e}();d.decorators=[{type:n.Component,args:[{selector:"country-select",template:'<ion-list>\n  <ion-item\n    *ngFor="let country of filteredCountries ? filteredCountries : countries"\n    (click)="ionChange.emit(country); popover.dismiss()"\n    [button]="true"\n    lines="none"\n    [id]="country.code"\n  >\n    <ion-row class="ion-justify-content-between ion-align-items-center">\n      <ion-row class="ion-align-items-center">\n        <span class="flag ion-margin-end">{{ country.emoji }}</span>\n        {{ country.name }}\n      </ion-row>\n      <span class="code">+{{ country.numberCode }}</span>\n    </ion-row>\n  </ion-item>\n  <ion-row class="no-results" *ngIf="filteredCountries?.length === 0">\n    {{ noResultsText }}\n  </ion-row>\n</ion-list>\n',styles:[":host{display:contents;position:relative}:host ion-item{font-size:14px}:host ion-item .flag{font-size:24px}:host ion-item>ion-row{flex:1;flex-wrap:nowrap}:host ion-item>ion-row>ion-row{flex-wrap:nowrap}:host ion-item .code{font-weight:500;opacity:.64}:host .no-results{align-items:center;cursor:not-allowed;justify-content:center;min-height:100px;opacity:.32}"]}]}],d.ctorParameters=function(){return[{type:n.ElementRef}]},d.propDecorators={countries:[{type:n.Input}],selected:[{type:n.Input}],noResultsText:[{type:n.Input}],ionChange:[{type:n.Output}]};var p=function(){function e(e){this.popover=e,this.defaultCountry="US",this.country=this.defaultCountry,this.noResultsText="No Results",this.ionChangePhoneNumber=new n.EventEmitter,this.ionChangeValidity=new n.EventEmitter,this._value=new r.BehaviorSubject(void 0),this._valueToEmit=new r.BehaviorSubject(void 0),this._country=new r.BehaviorSubject(void 0),this.countryNamesByIsoCode=h,this.iterableCountryInfos=[]}return e.prototype.ngOnInit=function(){var e=this;this.emojiRefByIsoCode=Object.keys(this.countryNamesByIsoCode).reduce((function(n,t){return n[t]=a(t),e.iterableCountryInfos.push({emoji:n[t],name:e.countryNamesByIsoCode[t],code:t,numberCode:i.getCountryCallingCode(t)}),n}),{}),this.countrySubscription=this._country.asObservable().subscribe((function(n){var t=null!=n?n:e.defaultCountry;e.countryInfo={emoji:e.emojiRefByIsoCode[t],name:e.countryNamesByIsoCode[t],code:t,numberCode:i.getCountryCallingCode(t)}}))},e.prototype.ngOnChanges=function(e){console.log(e),(e.value||e.country)&&(this.value?this.parse():this.resetFields()),(e.value&&!e.value.isFirstChange()||e.country&&!e.country.isFirstChange())&&this._value.value!==this.value&&this.ionChangePhoneNumber.emit(this._valueToEmit.value),this._country.value||this._country.next(this.defaultCountry),e.country&&this.country&&this._country.next(this.country)},e.prototype.ngOnDestroy=function(){this.countrySubscription.unsubscribe()},e.prototype.change=function(e){e.detail.value?this.parse(e.detail.value):(this.resetFields(),this.ionChangeValidity.emit(!1)),this.ionChangePhoneNumber.emit(this._valueToEmit.value)},e.prototype.openCountrySelect=function(e){return u(this,void 0,void 0,(function(){var n=this;return s(this,(function(t){switch(t.label){case 0:return[4,this.popover.create({component:d,componentProps:{noResultsText:this.noResultsText,countries:this.iterableCountryInfos,selected:this.countryInfo,ionChange:{emit:function(e){console.log("emit"),n._country.next(e.code),n._value.value&&n.parse(n._value.value.toString()),n.ionChangePhoneNumber.emit(n._valueToEmit.value)}}},cssClass:"country-popover",event:e,showBackdrop:!1,animated:!1})];case 1:return[2,t.sent().present()]}}))}))},e.prototype.parse=function(e){void 0===e&&(e=this.value);var n=i.parsePhoneNumberFromString(e,this._country.value);this._value.next(null==n?void 0:n.nationalNumber),this._valueToEmit.next(null==n?void 0:n.number),n&&this._country.next(n.country),this.ionChangeValidity.emit(!!(null==n?void 0:n.isValid()))},e.prototype.resetFields=function(){this._value.next(void 0),this._valueToEmit.next(void 0)},e}();p.decorators=[{type:n.Component,args:[{selector:"ui-phone-input",template:'<ion-item>\n  <ion-button fill="clear" (click)="openCountrySelect($event)">\n    {{ countryInfo?.emoji }}\n    <ion-icon name="caret-down-sharp" slot="end" color="dark"> </ion-icon>\n    <ion-text color="dark" class="ion-margin-start">\n      +{{ countryInfo?.numberCode }}\n    </ion-text>\n  </ion-button>\n  \x3c!-- <ion-select\n      [value]="countryInfo?.code"\n      (ionChange)="changeCountry($event)"\n      interface="popover"\n    >\n      <ion-searchbar></ion-searchbar>\n      <ion-select-option\n        [value]="_countryInfo.code"\n        *ngFor="let _countryInfo of iterableCountryInfos"\n      >\n        {{ _countryInfo.emoji }}\n        {{ _countryInfo.name }}\n        +{{ _countryInfo.numberCode }}\n      </ion-select-option>\n    </ion-select> --\x3e\n  <ion-input\n    [value]="_value.value"\n    (ionChange)="change($event)"\n    [placeholder]="placeholder"\n  >\n  </ion-input>\n</ion-item>\n',styles:[":host{display:block}:host ion-item{--padding-start:0}:host ion-item>ion-button{--border-radius:0;font-size:24px;height:100%;margin:0}:host ion-item>ion-button ion-icon,:host ion-item>ion-button ion-text{font-size:14px}"]}]}],p.ctorParameters=function(){return[{type:t.PopoverController}]},p.propDecorators={country:[{type:n.Input}],value:[{type:n.Input}],placeholder:[{type:n.Input}],noResultsText:[{type:n.Input}],ionChangePhoneNumber:[{type:n.Output}],ionChangeValidity:[{type:n.Output}]};var y=[p,d],m=function(){};m.decorators=[{type:n.NgModule,args:[{declarations:c(y),imports:[t.IonicModule,o.CommonModule],exports:c(y),entryComponents:[]}]}],e.CountrySelectComponent=d,e.ISO_COUNTRY_CODE_TO_NAME=h,e.UiPhoneInputComponent=p,e.UiPhoneInputModule=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ui-phone-input.umd.min.js.map